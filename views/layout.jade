doctype html
html
  include header

  body

    block content
  script(src="/javascripts/vis.js")

     
  script.
    // create a timeline with some data
    var container = document.getElementById('visualization');
  
    var options = {
    type: 'point',
    showMajorLabels: true,
    groupOrder: function (a, b) {
      
      console.log(a.begin);
      return a.begin.getTime() - b.end.getTime();
    }, 
    start: '1080-01-01', 
    end: '1160-01-01',
    orientation: 'top',
    //height: '100%'
    height: (window.innerHeight - 15)
    //height: '750px'
    };
    
    
    
    
    var items = new vis.DataSet(!{JSON.stringify(items)}, {type: {
                                start: 'Date',
                                end: 'Date',
                                country: 'string',
                                group: 'string'}});
                                
    var groups = new vis.DataSet(!{JSON.stringify(groups)}, {type: {
                                begin: 'Date',
                                end: 'Date',
                                content: 'String',
                                value: 'number',
                                id: 'String'}});
    
      
    //console.log(groups);
    var timeline = new vis.Timeline(container, items, options);
    
    timeline.setGroups(groups);
    function zoom (percentage) {
       var range = timeline.getWindow();
       var interval = range.end - range.start;

       timeline.setWindow({
           start: range.start.valueOf() - interval * percentage,
           end:   range.end.valueOf()   + interval * percentage
       });
    }
    
      // retrieve all items having a property group with value 2
    var hussites = items.get({
      filter: function (item) {
        //return item range overlaps with timerange
        return (item.group == 'hussite');
      }
    });   
    console.log(hussites[0].content);
    
    
    var i;
    function onRangeChange (properties) {
      console.log(i++ +' selected items');

    }

    // attach events to the navigation buttons
    document.getElementById('zoomIn').onclick    = function () { zoom(-0.2); };
    document.getElementById('zoomOut').onclick   = function () { zoom( 0.2); };
    window.onresize = function () {
      //console.log('resize')
    };
    timeline.on('rangechanged', function (properties) {
      onRangeChange(properties);
    });
   


